# nc用法

##### 1. 端口测试
你在服务器 A主机（192.168.1.2） 上面 8080 端口启动了一个服务，可用如下方法检测服务的 TCP 端口是否启动成功，或者在 B 主机上能不能正常访问该端口
```
nc -vz 192.168.1.2 8080
```
##### 2. 测试 UDP 会话
在 A 主机上：
```
nc -u -l -p 8080
```
监听 udp 的 8080 端口，然后 B 主机上连上去：
```
nc -u 192.168.1.2 8080
```
然后像前面测试 tcp 的方法进行检测，结束了 CTRL+C 退出，看看一边输入消息另外一边能否收到，收得到说明两台之间UDP可达
##### 3. 文件传输
在 A 主机上监听端口：
```
nc -l -p 8080 > image.jpg
```
然后在 B 主机上：
```
nc 192.168.1.2 8080 < image.jpg
```

##### 4. 网速吞吐量测试
在 A 主机运行：
```
nc -l -p 8080 | pv
```
然后再 B 主机运行：
```
nc 192.168.1.2 8080 < /dev/zero
```
此时 A 主机那端持续收到 B 主机发送过来的数据并通过管道投递给 pv 命令后，你就能看到实时的带宽统计了，pv 会输出一个实时状态：
```
353MiB 0:00:15 [22.4MiB/s] [          <=>  ]
```
##### 5. 系统后门
假设你从B主机登陆到A主机，并用命令操作A主机，可以加 -e 参数，在连接建立的时候执行一个程序，并把它的标准输入输出重定向到网络连接上来，于是我们可以在 A 主机上 -e 一下 bash：
```
nc -l -p 8080 -e /bin/bash
```
然后在B主机登陆A
```
nc 192.168.1.2 8080

```
然后就可以在B主机输入命令，会返回A主机的操作结果

参考：
https://mp.weixin.qq.com/s/wMEXozHaJbxZSbdCrT_kDA